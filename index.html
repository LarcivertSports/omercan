<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÄ Google Drive Gizli Video Player</title>
    <style>
        body { 
            margin: 0; padding: 20px; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: 'Segoe UI', sans-serif; 
            display: flex; flex-direction: column; 
            align-items: center; min-height: 100vh;
        }
        .player-container { 
            background: rgba(0,0,0,0.9); 
            border-radius: 20px; 
            padding: 20px; 
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            max-width: 95vw; width: 900px;
        }
        video { width: 100%; height: 500px; border-radius: 15px; }
        input { 
            width: 100%; padding: 15px; 
            border: none; border-radius: 10px; 
            font-size: 16px; margin: 10px 0;
            background: rgba(255,255,255,0.1); color: white;
        }
        button { 
            background: linear-gradient(45deg, #ff6b6b, #feca57);
            border: none; padding: 15px 30px; 
            border-radius: 10px; color: white;
            font-weight: bold; cursor: pointer; margin: 10px;
        }
        .status { 
            padding: 10px; border-radius: 10px; 
            margin: 10px 0; font-weight: bold;
            background: rgba(0,255,0,0.2);
        }
        @media (max-width: 768px) { 
            video { height: 60vh; } 
        }
    </style>
</head>
<body>
    <div class="player-container">
        <h1>üî• Google Drive Gƒ∞ZLƒ∞ Video Player</h1>
        <p><strong>ƒ∞zin istemeden direkt izle!</strong></p>
        
        <input type="url" id="driveUrl" placeholder="https://drive.google.com/drive/folders/1RjzcAsRPHaE00Hpn7NpA6kxvjHA4-zkX veya file linki">
        
        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
            <button onclick="extractVideo()">üîç Vƒ∞DEO BUL</button>
            <button onclick="playVideo()">‚ñ∂Ô∏è OYNAT</button>
            <button onclick="downloadVideo()" id="dlBtn" style="display:none;">üì• ƒ∞NDƒ∞R</button>
        </div>
        
        <div class="status" id="status" style="display:none;"></div>
        <video id="player" controls style="display:none;" preload="metadata"></video>
    </div>

    <script>
        async function extractVideo() {
            const url = document.getElementById('driveUrl').value;
            if (!url.includes('drive.google.com')) return alert('‚ùå Google Drive linki gir!');
            
            const status = document.getElementById('status');
            status.textContent = 'üîÑ Video linki √ßƒ±karƒ±lƒ±yor...';
            status.style.display = 'block';
            
            try {
                // Google Drive ID √ßƒ±karma
                let fileId = '';
                if (url.includes('/file/d/')) {
                    fileId = url.split('/file/d/')[1]?.split('/')[0];
                } else if (url.includes('/folders/')) {
                    fileId = url.split('/folders/')[1]?.split('?')[0];
                }
                
                if (!fileId) throw new Error('File ID bulunamadƒ±');
                
                status.textContent = 'üì° Direct link alƒ±nƒ±yor...';
                
                // Google Drive direct link generator
                const directUrl = `https://drive.google.com/uc?export=download&id=${fileId}`;
                
                // Test et
                const response = await fetch(`https://api.allorigins.win/raw?url=${encodeURIComponent(directUrl)}`, {
                    method: 'HEAD'
                });
                
                if (response.ok) {
                    status.textContent = '‚úÖ Video hazƒ±r!';
                    status.style.background = 'rgba(0,255,0,0.3)';
                    document.getElementById('player').src = directUrl;
                    document.getElementById('player').style.display = 'block';
                    document.getElementById('dlBtn').style.display = 'inline-block';
                    document.getElementById('dlBtn').onclick = () => downloadFile(directUrl, 'drive_video.mp4');
                } else {
                    // Folder tarama modu
                    status.textContent = 'üìÇ Folder taranƒ±yor...';
                    await scanFolder(url);
                }
                
            } catch(e) {
                status.textContent = `‚ùå Hata: ${e.message}`;
                status.style.background = 'rgba(255,0,0,0.3)';
            }
        }
        
        async function scanFolder(folderUrl) {
            try {
                const proxyUrl = `https://api.allorigins.win/raw?url=${encodeURIComponent(folderUrl)}`;
                const html = await (await fetch(proxyUrl)).text();
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                
                // Google Drive folder'daki video linklerini bul
                const videoLinks = Array.from(doc.querySelectorAll('a[href*="drive.google.com/file/d/"]'))
                    .map(a => a.href.match(/\/file\/d\/([a-zA-Z0-9-_]+)/)?.[1])
                    .filter(Boolean);
                
                if (videoLinks.length) {
                    const firstVideo = videoLinks[0];
                    const directUrl = `https://drive.google.com/uc?export=download&id=${firstVideo}`;
                    document.getElementById('player').src = directUrl;
                    document.getElementById('player').style.display = 'block';
                    document.getElementById('status').textContent = `‚úÖ ${videoLinks.length} video bulundu! ƒ∞lk video oynatƒ±lƒ±yor...`;
                } else {
                    throw new Error('Video bulunamadƒ±');
                }
            } catch(e) {
                document.getElementById('status').textContent = '‚ùå Folder\'da video yok veya gizli';
            }
        }
        
        function playVideo() {
            const player = document.getElementById('player');
            if (player.src) {
                player.play();
            } else {
                extractVideo();
            }
        }
        
        function downloadFile(url, filename) {
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }
        
        // Otomatik algƒ±la
        document.getElementById('driveUrl').value = 'https://drive.google.com/drive/folders/1RjzcAsRPHaE00Hpn7NpA6kxvjHA4-zkX';
    </script>
</body>
</html>
