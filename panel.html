<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HLS Yayın Portalı</title>
    
    <!-- Tailwind CSS'i CDN üzerinden ekliyoruz -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- HLS.js kütüphanesini CDN üzerinden ekliyoruz -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    
    <!-- Google Fonts'tan Inter font ailesini ekliyoruz -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .video-container {
            position: relative;
            width: 100%;
            padding-bottom: 56.25%; /* 16:9 aspect ratio */
            background-color: #000;
            border-radius: 0.75rem;
            overflow: hidden;
            transition: all 0.3s ease-in-out;
        }
        #video-player {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        .channel-card {
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .channel-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(239, 68, 68, 0.3), 0 4px 6px -2px rgba(239, 68, 68, 0.2);
        }
        .channel-card.active {
             outline: 3px solid #ef4444;
             transform: scale(1.05);
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200 antialiased">

    <!-- Ana Konteyner -->
    <div class="container mx-auto p-4 md:p-8">
        
        <!-- Başlık Bölümü -->
        <header class="text-center mb-8">
             <h1 class="text-4xl md:text-5xl font-bold text-white">Yayın Portalı</h1>
             <p class="mt-3 text-lg text-gray-400">İzlemek istediğiniz kanalı seçin.</p>
        </header>

        <!-- Video Oynatıcı ve Durum Mesajı -->
        <div class="mb-8">
            <div id="player-wrapper" class="video-container shadow-2xl">
                <video id="video-player" controls poster="https://placehold.co/1920x1080/000000/FFFFFF?text=İzlemek+için+bir+kanal+seçin..."></video>
            </div>
            <div id="statusMessage" class="mt-3 text-center text-sm text-yellow-400 h-5"></div>
        </div>

        <!-- Kanal Listesi -->
        <main>
            <h2 class="text-2xl font-bold text-white mb-6">Kanal Listesi</h2>
            <div id="channel-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4 md:gap-6">
                <!-- Kanal kartları JavaScript ile buraya eklenecek -->
            </div>
        </main>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- KANAL LİSTENİZİ BURAYA EKLEYİN ---
            // ÖNEMLİ: Telif hakları nedeniyle size doğrudan bir yayın linki veremiyoruz.
            // Lütfen 'streamUrl' kısımlarına kendi yasal HLS yayın linklerinizi ekleyin.
            const channels = [
                {
                    name: 'beIN SPORTS 1',
                    logo: 'https://placehold.co/200x100/5a2d82/ffffff?text=beIN+SPORTS+1',
                    // BURAYI KENDİ YASAL YAYIN LİNKİNİZLE DEĞİŞTİRİN
                    streamUrl: 'https://bs.arectv33.sbs/static/bs1.m3u8' 
                },
                {
                    name: 'Star TV',
                    logo: 'https://placehold.co/200x100/007bff/ffffff?text=Star+TV',
                    // BURAYI KENDİ YASAL YAYIN LİNKİNİZLE DEĞİŞTİRİN
                    streamUrl: 'https://www.mersotv1.com/channel.html?id=yayinb2' // Örnek test yayını
                }
            ];

            // DOM elementlerini seçme
            const video = document.getElementById('video-player');
            const statusMessage = document.getElementById('statusMessage');
            const channelGrid = document.getElementById('channel-grid');
            let hls = null;
            let activeCard = null;

            // Kanal listesini ekrana çiz
            function renderChannelGrid() {
                channelGrid.innerHTML = ''; // Mevcut gridi temizle
                channels.forEach((channel, index) => {
                    const card = document.createElement('div');
                    card.className = 'channel-card bg-gray-800 rounded-lg p-3 cursor-pointer flex flex-col items-center justify-center text-center';
                    card.dataset.streamUrl = channel.streamUrl;
                    
                    card.innerHTML = `
                        <img src="${channel.logo}" alt="${channel.name} Logo" class="w-full h-auto object-contain rounded-md mb-3 bg-black" onerror="this.onerror=null;this.src='https://placehold.co/200x100/1f2937/9ca3af?text=Logo+Bulunamadı';">
                        <p class="text-sm font-semibold text-gray-300">${channel.name}</p>
                    `;
                    
                    card.addEventListener('click', () => {
                        loadStream(channel.streamUrl);
                        // Aktif kart stilini ayarla
                        if (activeCard) {
                            activeCard.classList.remove('active');
                        }
                        card.classList.add('active');
                        activeCard = card;
                    });
                    
                    channelGrid.appendChild(card);
                });
            }

            // Yayın yükleme fonksiyonu
            function loadStream(streamUrl) {
                if (!streamUrl || streamUrl.includes('YASAL_')) {
                    setStatus('Lütfen kod içerisinden geçerli bir yayın URL\'si ekleyin.', 'error');
                    return;
                }

                if (hls) {
                    hls.destroy();
                }

                if (Hls.isSupported()) {
                    setStatus('Yayın yükleniyor...', 'info');
                    hls = new Hls({
                         // Düşük gecikme için ayarlar (isteğe bağlı)
                        lowLatencyMode: true,
                        backBufferLength: 90,
                    });
                    hls.loadSource(streamUrl);
                    hls.attachMedia(video);
                    
                    hls.on(Hls.Events.MANIFEST_PARSED, () => {
                        setStatus('Yayın başarıyla yüklendi.', 'success');
                        video.play().catch(e => console.error("Oynatma hatası:", e));
                    });

                    hls.on(Hls.Events.ERROR, (event, data) => {
                        if (data.fatal) {
                            switch (data.type) {
                                case Hls.ErrorTypes.NETWORK_ERROR:
                                    setStatus('Network hatası. URL\'yi veya internet bağlantınızı kontrol edin.', 'error');
                                    break;
                                case Hls.ErrorTypes.MEDIA_ERROR:
                                    setStatus('Medya hatası. Video çözümlenemedi.', 'error');
                                    hls.recoverMediaError();
                                    break;
                                default:
                                    setStatus('Bilinmeyen bir yayın hatası oluştu.', 'error');
                                    hls.destroy();
                                    break;
                            }
                        }
                    });

                } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                    video.src = streamUrl;
                    video.addEventListener('loadedmetadata', () => {
                        setStatus('Yayın başarıyla yüklendi.', 'success');
                        video.play();
                    });
                     video.addEventListener('error', () => {
                        setStatus('Yayın yüklenemedi. URL\'yi kontrol edin.', 'error');
                    });
                } else {
                    setStatus('Tarayıcınız HLS yayınlarını desteklemiyor.', 'error');
                }
            }

            // Durum mesajı fonksiyonu
            function setStatus(message, type = 'info') {
                statusMessage.textContent = message;
                statusMessage.className = 'mt-3 text-center text-sm h-5 ';
                if (type === 'success') statusMessage.classList.add('text-green-400');
                else if (type === 'error') statusMessage.classList.add('text-red-400');
                else statusMessage.classList.add('text-yellow-400');
            }

            // Başlangıç
            renderChannelGrid();
        });
    </script>
</body>
</html>
